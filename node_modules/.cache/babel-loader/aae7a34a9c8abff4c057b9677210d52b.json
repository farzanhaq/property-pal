{"ast":null,"code":"var _jsxFileName = \"/Users/farzanhaq/Desktop/PropertyPal/src/components/Booking/Identification/Identification.tsx\",\n    _s = $RefreshSig$();\n\nimport { LeftOutlined, LoadingOutlined, PlusOutlined, RightOutlined } from \"@ant-design/icons\";\nimport { Button, message, Space, Typography } from \"antd\";\nimport { Auth, Storage } from \"aws-amplify\";\nimport { useContext, useState } from \"react\";\nimport { BookingStatusContext } from \"../../../utils/BookingState\";\nimport { StyledButtonNavDiv, StyledContentDiv, StyledIdentificationDiv, StyledIdentificationUploadDiv } from \"../../Styles/Div.style\";\nimport { StyledIdentificationUploadImage } from \"../../Styles/Image.style\";\nimport { StyledPrompt } from \"../../Styles/Title.style\";\nimport { StyledIdentificationUploader } from \"../../Styles/Upload.style\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Identification = () => {\n  _s();\n\n  const [showAlert, setShowAlert] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [imageUrl, setImageUrl] = useState(\"\");\n  const {\n    currentStep,\n    setCurrentStep\n  } = useContext(BookingStatusContext);\n\n  const getBase64 = (img, callback) => {\n    const reader = new FileReader();\n    reader.addEventListener(\"load\", () => callback(reader.result));\n    reader.readAsDataURL(img);\n  };\n\n  const beforeUpload = file => {\n    const isJpgOrPng = file.type === \"image/jpeg\" || file.type === \"image/png\";\n\n    if (!isJpgOrPng) {\n      message.error(\"Please upload a JPG/PNG file\");\n    }\n\n    const isLt2M = file.size / 1024 / 1024 < 2;\n\n    if (!isLt2M) {\n      message.error(\"Image must smaller than 2MB\");\n    }\n\n    return isJpgOrPng && isLt2M;\n  };\n\n  const handleChange = info => {\n    if (info.file.status === \"uploading\") {\n      setLoading(true);\n      return;\n    }\n\n    if (info.file.status === \"done\" && info.file.originFileObj) {\n      getBase64(info.file.originFileObj, imageUrl => {\n        setImageUrl(imageUrl);\n        setLoading(false);\n      });\n    }\n  };\n\n  const performUpload = async options => {\n    try {\n      setShowAlert(false);\n      const {\n        onSuccess,\n        file\n      } = options;\n      const user = await Auth.currentAuthenticatedUser();\n      const result = await Storage.put(`identifications/${user.attributes.sub}`, file);\n      await Auth.updateUserAttributes(user, {\n        picture: result.key\n      });\n      setTimeout(() => {\n        onSuccess(\"ok\");\n      }, 0);\n    } catch (err) {\n      setShowAlert(true);\n      console.log(\"error uploading photo: \" + err);\n    }\n  };\n\n  const uploadButton = /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [loading ? /*#__PURE__*/_jsxDEV(LoadingOutlined, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 18\n    }, this) : /*#__PURE__*/_jsxDEV(PlusOutlined, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 40\n    }, this), /*#__PURE__*/_jsxDEV(StyledIdentificationUploadDiv, {\n      children: \"Upload\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(StyledIdentificationDiv, {\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      children: /*#__PURE__*/_jsxDEV(StyledPrompt, {\n        level: 5,\n        children: \"Please upload a photo of your drivers license\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(StyledContentDiv, {\n      children: /*#__PURE__*/_jsxDEV(StyledIdentificationUploader, {\n        listType: \"picture-card\",\n        showUploadList: false,\n        beforeUpload: beforeUpload,\n        onChange: info => handleChange(info),\n        customRequest: options => performUpload(options),\n        children: imageUrl ? /*#__PURE__*/_jsxDEV(StyledIdentificationUploadImage, {\n          src: imageUrl,\n          alt: \"license\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 13\n        }, this) : uploadButton\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(StyledButtonNavDiv, {\n      children: /*#__PURE__*/_jsxDEV(Space, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          shape: \"circle\",\n          size: \"large\",\n          icon: /*#__PURE__*/_jsxDEV(LeftOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 19\n          }, this),\n          onClick: () => setCurrentStep(currentStep - 1)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          shape: \"circle\",\n          size: \"large\",\n          icon: /*#__PURE__*/_jsxDEV(RightOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 19\n          }, this),\n          onClick: () => {\n            setCurrentStep(currentStep + 1);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Identification, \"gIpiJu4yHxSeXbX+08tM1ukKXZc=\");\n\n_c = Identification;\nexport default Identification;\n\nvar _c;\n\n$RefreshReg$(_c, \"Identification\");","map":{"version":3,"sources":["/Users/farzanhaq/Desktop/PropertyPal/src/components/Booking/Identification/Identification.tsx"],"names":["LeftOutlined","LoadingOutlined","PlusOutlined","RightOutlined","Button","message","Space","Typography","Auth","Storage","useContext","useState","BookingStatusContext","StyledButtonNavDiv","StyledContentDiv","StyledIdentificationDiv","StyledIdentificationUploadDiv","StyledIdentificationUploadImage","StyledPrompt","StyledIdentificationUploader","Identification","showAlert","setShowAlert","loading","setLoading","imageUrl","setImageUrl","currentStep","setCurrentStep","getBase64","img","callback","reader","FileReader","addEventListener","result","readAsDataURL","beforeUpload","file","isJpgOrPng","type","error","isLt2M","size","handleChange","info","status","originFileObj","performUpload","options","onSuccess","user","currentAuthenticatedUser","put","attributes","sub","updateUserAttributes","picture","key","setTimeout","err","console","log","uploadButton"],"mappings":"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","sourcesContent":["import {\n  LeftOutlined,\n  LoadingOutlined,\n  PlusOutlined,\n  RightOutlined\n} from \"@ant-design/icons\";\nimport { S3ProviderPutOutput } from \"@aws-amplify/storage\";\nimport { Button, message, Space, Typography } from \"antd\";\nimport { UploadChangeParam } from \"antd/lib/upload\";\nimport { UploadFile } from \"antd/lib/upload/interface\";\nimport { Auth, Storage } from \"aws-amplify\";\nimport { useContext, useState } from \"react\";\nimport { BookingStatusContext } from \"../../../utils/BookingState\";\nimport {\n  StyledButtonNavDiv,\n  StyledContentDiv,\n  StyledIdentificationDiv,\n  StyledIdentificationUploadDiv\n} from \"../../Styles/Div.style\";\nimport { StyledIdentificationUploadImage } from \"../../Styles/Image.style\";\nimport { StyledPrompt } from \"../../Styles/Title.style\";\nimport { StyledIdentificationUploader } from \"../../Styles/Upload.style\";\n\nconst Identification = () => {\n  const [showAlert, setShowAlert] = useState<boolean>(false);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [imageUrl, setImageUrl] = useState<string>(\"\");\n  const { currentStep, setCurrentStep } = useContext(BookingStatusContext);\n\n  const getBase64 = (\n    img: Blob,\n    callback: {\n      (imageUrl: any): void;\n      (arg0: string | ArrayBuffer | null): any;\n    }\n  ) => {\n    const reader = new FileReader();\n    reader.addEventListener(\"load\", () => callback(reader.result));\n    reader.readAsDataURL(img);\n  };\n\n  const beforeUpload = (file: { type: string; size: number }) => {\n    const isJpgOrPng = file.type === \"image/jpeg\" || file.type === \"image/png\";\n\n    if (!isJpgOrPng) {\n      message.error(\"Please upload a JPG/PNG file\");\n    }\n\n    const isLt2M = file.size / 1024 / 1024 < 2;\n\n    if (!isLt2M) {\n      message.error(\"Image must smaller than 2MB\");\n    }\n\n    return isJpgOrPng && isLt2M;\n  };\n\n  const handleChange = (info: UploadChangeParam<UploadFile<any>>) => {\n    if (info.file.status === \"uploading\") {\n      setLoading(true);\n      return;\n    }\n\n    if (info.file.status === \"done\" && info.file.originFileObj) {\n      getBase64(info.file.originFileObj, (imageUrl) => {\n        setImageUrl(imageUrl);\n        setLoading(false);\n      });\n    }\n  };\n\n  const performUpload = async (options: any) => {\n    try {\n      setShowAlert(false);\n\n      const { onSuccess, file } = options;\n\n      const user = await Auth.currentAuthenticatedUser();\n\n      const result: S3ProviderPutOutput = await Storage.put(\n        `identifications/${user.attributes.sub}`,\n        file\n      );\n\n      await Auth.updateUserAttributes(user, {\n        picture: result.key,\n      });\n\n      setTimeout(() => {\n        onSuccess(\"ok\");\n      }, 0);\n    } catch (err) {\n      setShowAlert(true);\n      console.log(\"error uploading photo: \" + err);\n    }\n  };\n\n  const uploadButton = (\n    <div>\n      {loading ? <LoadingOutlined /> : <PlusOutlined />}\n      <StyledIdentificationUploadDiv>Upload</StyledIdentificationUploadDiv>\n    </div>\n  );\n\n  return (\n    <StyledIdentificationDiv>\n      <Typography>\n        <StyledPrompt level={5}>\n          Please upload a photo of your drivers license\n        </StyledPrompt>\n      </Typography>\n      <StyledContentDiv>\n        <StyledIdentificationUploader\n          listType=\"picture-card\"\n          showUploadList={false}\n          beforeUpload={beforeUpload}\n          onChange={(info) => handleChange(info)}\n          customRequest={(options) => performUpload(options)}\n        >\n          {imageUrl ? (\n            <StyledIdentificationUploadImage src={imageUrl} alt=\"license\" />\n          ) : (\n            uploadButton\n          )}\n        </StyledIdentificationUploader>\n      </StyledContentDiv>\n      <br />\n      <br />\n      <StyledButtonNavDiv>\n        <Space>\n          <Button\n            type=\"primary\"\n            shape=\"circle\"\n            size=\"large\"\n            icon={<LeftOutlined />}\n            onClick={() => setCurrentStep(currentStep - 1)}\n          />\n          <Button\n            type=\"primary\"\n            shape=\"circle\"\n            size=\"large\"\n            icon={<RightOutlined />}\n            onClick={() => {\n              setCurrentStep(currentStep + 1);\n            }}\n          />\n        </Space>\n      </StyledButtonNavDiv>\n    </StyledIdentificationDiv>\n  );\n};\n\nexport default Identification;\n"]},"metadata":{},"sourceType":"module"}