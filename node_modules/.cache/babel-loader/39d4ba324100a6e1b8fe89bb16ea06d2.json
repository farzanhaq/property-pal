{"ast":null,"code":"var _jsxFileName = \"/Users/farzanhaq/Desktop/PropertyPal/src/components/Screening/Confirmation/Confirmation.tsx\",\n    _s = $RefreshSig$();\n\nimport { useContext } from \"react\";\nimport { LeftOutlined, RightOutlined } from \"@ant-design/icons\";\nimport { Typography, Descriptions, Divider, Button, Space } from \"antd\";\nimport { Link } from \"react-router-dom\";\nimport { BuyerExperienceKind, BuyerPurposeKind } from \"../../../utils/enums\";\nimport { FormContext, FormStatusContext } from \"../../../utils/FormState\";\nimport { createScreening, updateScreening } from \"../../../graphql/mutations\";\nimport { API, graphqlOperation, Auth } from \"aws-amplify\";\nimport { StyledPrompt } from \"../../Styles/Title.style\";\nimport { StyledButtonNavDiv, StyledScreeningConfirmationDiv } from \"../../Styles/Div.style\";\nimport { listScreenings } from \"../../../graphql/queries\";\nimport { useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  Item\n} = Descriptions;\n\nconst Confirmation = () => {\n  _s();\n\n  const {\n    formState\n  } = useContext(FormContext);\n  const {\n    currentStep,\n    setCurrentStep\n  } = useContext(FormStatusContext);\n  const history = useHistory();\n\n  const onFormSubmit = async () => {\n    try {\n      const {\n        attributes: {\n          email\n        }\n      } = await Auth.currentAuthenticatedUser();\n      const filter = {\n        user_email: {\n          eq: email\n        }\n      };\n      const screenings = await API.graphql({\n        query: listScreenings,\n        variables: {\n          filter: filter\n        }\n      });\n      let screening;\n\n      if (screenings.data.listScreenings.items.length === 0) {\n        await API.graphql(graphqlOperation(createScreening, {\n          input: {\n            budget: formState.budget,\n            buyer_experience: formState.buyerExperience,\n            buyer_purpose: formState.buyerPurpose,\n            unit_premium_interest: formState.premiums,\n            num_bedrooms: formState.numBedrooms,\n            num_bathrooms: formState.numBathrooms,\n            user_email: email\n          }\n        }));\n      } else {\n        await API.graphql(graphqlOperation(updateScreening, {\n          input: {\n            id: screenings.data.listScreenings.items[0].id,\n            budget: formState.budget,\n            buyer_experience: formState.buyerExperience,\n            buyer_purpose: formState.buyerPurpose,\n            unit_premium_interest: formState.premiums,\n            num_bedrooms: formState.numBedrooms,\n            num_bathrooms: formState.numBathrooms,\n            user_email: email\n          }\n        }));\n      } //await API.graphql(graphqlOperation(getScreening, {\n      //}))\n\n\n      setCurrentStep(0);\n      history.push(\"/results\");\n    } catch (err) {\n      console.log(\"error creating screening: \", err);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      children: /*#__PURE__*/_jsxDEV(StyledPrompt, {\n        level: 5,\n        children: \"Please confirm your details...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(StyledScreeningConfirmationDiv, {\n      children: [/*#__PURE__*/_jsxDEV(Descriptions, {\n        title: \"Experience\",\n        children: /*#__PURE__*/_jsxDEV(Item, {\n          children: formState.buyerExperience === BuyerExperienceKind.FIRST_TIME ? \"I am looking to buy my first property\" : \"I have experience purchasing properties\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Descriptions, {\n        title: \"Purpose\",\n        children: /*#__PURE__*/_jsxDEV(Item, {\n          children: formState.buyerPurpose === BuyerPurposeKind.OWNER ? \"I am looking for a property to live in\" : \"I am looking for an investment property\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Descriptions, {\n        title: \"Bedrooms\",\n        children: /*#__PURE__*/_jsxDEV(Item, {\n          children: `${formState.numBathrooms.length === 0 ? \"Any\" : formState.numBedrooms.join(\", \")}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Descriptions, {\n        title: \"Bathrooms\",\n        children: /*#__PURE__*/_jsxDEV(Item, {\n          children: `${formState.numBedrooms.length === 0 ? \"Any\" : formState.numBathrooms.join(\", \")}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Descriptions, {\n        title: \"Premiums\",\n        children: /*#__PURE__*/_jsxDEV(Item, {\n          children: `${formState.premiums.length === 0 ? \"None\" : formState.premiums.join(\", \")}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Descriptions, {\n        title: \"Budget\",\n        children: /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n          children: formState.budget[0] != null && formState.budget[1] != null ? `$${formState.budget[0].toString().replace(new RegExp(/\\B(?=(\\d{3})+(?!\\d))/g), \",\")} - $${formState.budget[1].toString().replace(new RegExp(/\\B(?=(\\d{3})+(?!\\d))/g), \",\")}` : \"I do not have a budget\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(StyledButtonNavDiv, {\n      children: /*#__PURE__*/_jsxDEV(Space, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          shape: \"circle\",\n          size: \"large\",\n          icon: /*#__PURE__*/_jsxDEV(LeftOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 19\n          }, this),\n          onClick: () => setCurrentStep(currentStep - 1)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/results\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: onFormSubmit,\n            disabled: formState.buyerExperience === \"\" || formState.buyerPurpose === \"\" ? true : false,\n            type: \"primary\",\n            shape: \"circle\",\n            size: \"large\",\n            icon: /*#__PURE__*/_jsxDEV(RightOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 21\n            }, this),\n            htmlType: \"submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Confirmation, \"hGTrLEnzK5SwDhIj9bnIhpbG4HY=\", false, function () {\n  return [useHistory];\n});\n\n_c = Confirmation;\nexport default Confirmation;\n\nvar _c;\n\n$RefreshReg$(_c, \"Confirmation\");","map":{"version":3,"sources":["/Users/farzanhaq/Desktop/PropertyPal/src/components/Screening/Confirmation/Confirmation.tsx"],"names":["useContext","LeftOutlined","RightOutlined","Typography","Descriptions","Divider","Button","Space","Link","BuyerExperienceKind","BuyerPurposeKind","FormContext","FormStatusContext","createScreening","updateScreening","API","graphqlOperation","Auth","StyledPrompt","StyledButtonNavDiv","StyledScreeningConfirmationDiv","listScreenings","useHistory","Item","Confirmation","formState","currentStep","setCurrentStep","history","onFormSubmit","attributes","email","currentAuthenticatedUser","filter","user_email","eq","screenings","graphql","query","variables","screening","data","items","length","input","budget","buyer_experience","buyerExperience","buyer_purpose","buyerPurpose","unit_premium_interest","premiums","num_bedrooms","numBedrooms","num_bathrooms","numBathrooms","id","push","err","console","log","FIRST_TIME","OWNER","join","toString","replace","RegExp"],"mappings":"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","sourcesContent":["import { useContext } from \"react\";\nimport { LeftOutlined, RightOutlined } from \"@ant-design/icons\";\nimport { Typography, Descriptions, Divider, Button, Space } from \"antd\";\nimport { Link } from \"react-router-dom\";\nimport { BuyerExperienceKind, BuyerPurposeKind } from \"../../../utils/enums\";\nimport { FormContext, FormStatusContext } from \"../../../utils/FormState\";\nimport { createScreening, updateScreening } from \"../../../graphql/mutations\";\nimport { API, graphqlOperation, Auth } from \"aws-amplify\";\nimport { StyledPrompt } from \"../../Styles/Title.style\";\nimport {\n  StyledButtonNavDiv,\n  StyledScreeningConfirmationDiv,\n} from \"../../Styles/Div.style\";\nimport { getScreening, listScreenings } from \"../../../graphql/queries\";\nimport { useHistory } from 'react-router-dom';\n\nconst { Item } = Descriptions;\n\nconst Confirmation = () => {\n  const { formState } = useContext(FormContext);\n  const { currentStep, setCurrentStep } = useContext(FormStatusContext);\n  const history = useHistory();\n\n  const onFormSubmit = async () => {\n    try {\n      const {\n        attributes: { email },\n      } = await Auth.currentAuthenticatedUser();\n\n      const filter = {\n        user_email: {\n          eq: email,\n        },\n      };\n\n      const screenings: any = await API.graphql({\n        query: listScreenings,\n        variables: { filter: filter },\n      });\n\n      let screening: any\n\n      if (screenings.data.listScreenings.items.length === 0) {\n        await API.graphql(\n          graphqlOperation(createScreening, {\n            input: {\n              budget: formState.budget,\n              buyer_experience: formState.buyerExperience,\n              buyer_purpose: formState.buyerPurpose,\n              unit_premium_interest: formState.premiums,\n              num_bedrooms: formState.numBedrooms,\n              num_bathrooms: formState.numBathrooms,\n              user_email: email,\n            },\n          })\n        );\n      } else {\n        await API.graphql(\n          graphqlOperation(updateScreening, {\n            input: {\n              id: screenings.data.listScreenings.items[0].id,\n              budget: formState.budget,\n              buyer_experience: formState.buyerExperience,\n              buyer_purpose: formState.buyerPurpose,\n              unit_premium_interest: formState.premiums,\n              num_bedrooms: formState.numBedrooms,\n              num_bathrooms: formState.numBathrooms,\n              user_email: email,\n            },\n          })\n        );\n      }\n\n      //await API.graphql(graphqlOperation(getScreening, {\n\n      //}))\n\n      setCurrentStep(0);\n\n      history.push(\"/results\")\n    } catch (err) {\n      console.log(\"error creating screening: \", err);\n    }\n  };\n\n  return (\n    <>\n      <Typography>\n        <StyledPrompt level={5}>Please confirm your details...</StyledPrompt>\n      </Typography>\n      <br />\n      <StyledScreeningConfirmationDiv>\n        <Descriptions title=\"Experience\">\n          <Item>\n            {formState.buyerExperience === BuyerExperienceKind.FIRST_TIME\n              ? \"I am looking to buy my first property\"\n              : \"I have experience purchasing properties\"}\n          </Item>\n        </Descriptions>\n        <Divider />\n        <Descriptions title=\"Purpose\">\n          <Item>\n            {formState.buyerPurpose === BuyerPurposeKind.OWNER\n              ? \"I am looking for a property to live in\"\n              : \"I am looking for an investment property\"}\n          </Item>\n        </Descriptions>\n        <Divider />\n        <Descriptions title=\"Bedrooms\">\n          <Item>{`${\n            formState.numBathrooms.length === 0\n              ? \"Any\"\n              : formState.numBedrooms.join(\", \")\n          }`}</Item>\n        </Descriptions>\n        <Divider />\n        <Descriptions title=\"Bathrooms\">\n          <Item>{`${\n            formState.numBedrooms.length === 0\n              ? \"Any\"\n              : formState.numBathrooms.join(\", \")\n          }`}</Item>\n        </Descriptions>\n        <Divider />\n        <Descriptions title=\"Premiums\">\n          <Item>{`${\n            formState.premiums.length === 0\n              ? \"None\"\n              : formState.premiums.join(\", \")\n          }`}</Item>\n        </Descriptions>\n        <Divider />\n        <Descriptions title=\"Budget\">\n          <Descriptions.Item>\n            {formState.budget[0] != null && formState.budget[1] != null\n              ? `$${formState.budget[0]\n                  .toString()\n                  .replace(\n                    new RegExp(/\\B(?=(\\d{3})+(?!\\d))/g),\n                    \",\"\n                  )} - $${formState.budget[1]\n                  .toString()\n                  .replace(new RegExp(/\\B(?=(\\d{3})+(?!\\d))/g), \",\")}`\n              : \"I do not have a budget\"}\n          </Descriptions.Item>\n        </Descriptions>\n      </StyledScreeningConfirmationDiv>\n      <br />\n      <br />\n      <StyledButtonNavDiv>\n        <Space>\n          <Button\n            type=\"primary\"\n            shape=\"circle\"\n            size=\"large\"\n            icon={<LeftOutlined />}\n            onClick={() => setCurrentStep(currentStep - 1)}\n          />\n          <Link to=\"/results\">\n            <Button\n              onClick={onFormSubmit}\n              disabled={\n                formState.buyerExperience === \"\" ||\n                formState.buyerPurpose === \"\"\n                  ? true\n                  : false\n              }\n              type=\"primary\"\n              shape=\"circle\"\n              size=\"large\"\n              icon={<RightOutlined />}\n              htmlType=\"submit\"\n            />\n          </Link>\n        </Space>\n      </StyledButtonNavDiv>\n    </>\n  );\n};\n\nexport default Confirmation;\n"]},"metadata":{},"sourceType":"module"}