{"ast":null,"code":"var _jsxFileName = \"/Users/farzanhaq/Desktop/PropertyPal/src/components/Booking/Payment/PaymentButton.tsx\";\nimport { Elements } from \"@stripe/react-stripe-js\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Button, message } from \"antd\";\nimport { API, graphqlOperation } from \"aws-amplify\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { processPayment } from \"../../../graphql/mutations\";\nimport { StyledCheckoutText } from \"../../Styles/Text.style\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst STRIPE_PUBLIC_KEY = \"pk_test_51K6Lv8JfUhuzTQLsnTrk8sZTeap3i5f9QUCq8UlN4Rk0LRc77GbxppRAAqW5yl6RimUU1DSEymcAw4ioHnyAoCI000QFZV7fIs\";\n\nconst PaymentButton = ({\n  id,\n  total\n}) => {\n  const handlePay = async () => {\n    const payload = {\n      id: uuidv4(),\n      total: total.replace(/,/g, \"\"),\n      success_url: \"http://localhost:3000/success\",\n      cancel_url: \"http://localhost:3000\"\n    };\n    const response = await API.graphql(graphqlOperation(processPayment, {\n      input: payload\n    }));\n    const stripePromise = await loadStripe(STRIPE_PUBLIC_KEY);\n    stripePromise === null || stripePromise === void 0 ? void 0 : stripePromise.redirectToCheckout({\n      sessionId: response.data.processPayment\n    }).then(function (result) {\n      message.error(result.error.message);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Elements, {\n    stripe: loadStripe(STRIPE_PUBLIC_KEY),\n    children: /*#__PURE__*/_jsxDEV(Button, {\n      size: \"large\",\n      type: \"primary\",\n      onClick: handlePay,\n      children: [\"Checkout with\", /*#__PURE__*/_jsxDEV(StyledCheckoutText, {\n        strong: true,\n        italic: true,\n        children: \"Stripe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n};\n\n_c = PaymentButton;\nexport default PaymentButton;\n\nvar _c;\n\n$RefreshReg$(_c, \"PaymentButton\");","map":{"version":3,"sources":["/Users/farzanhaq/Desktop/PropertyPal/src/components/Booking/Payment/PaymentButton.tsx"],"names":["Elements","loadStripe","Button","message","API","graphqlOperation","v4","uuidv4","processPayment","StyledCheckoutText","STRIPE_PUBLIC_KEY","PaymentButton","id","total","handlePay","payload","replace","success_url","cancel_url","response","graphql","input","stripePromise","redirectToCheckout","sessionId","data","then","result","error"],"mappings":";AAAA,SAASA,QAAT,QAAyB,yBAAzB;AACA,SAASC,UAAT,QAA2B,mBAA3B;AACA,SAASC,MAAT,EAAiBC,OAAjB,QAAgC,MAAhC;AACA,SAASC,GAAT,EAAcC,gBAAd,QAAsC,aAAtC;AACA,SAASC,EAAE,IAAIC,MAAf,QAA6B,MAA7B;AACA,SAASC,cAAT,QAA+B,4BAA/B;AACA,SAASC,kBAAT,QAAmC,yBAAnC;;AAEA,MAAMC,iBAAyB,GAC7B,6GADF;;AAQA,MAAMC,aAAa,GAAG,CAAC;AAAEC,EAAAA,EAAF;AAAMC,EAAAA;AAAN,CAAD,KAAuC;AAC3D,QAAMC,SAAS,GAAG,YAAY;AAC5B,UAAMC,OAAO,GAAG;AACdH,MAAAA,EAAE,EAAEL,MAAM,EADI;AAEdM,MAAAA,KAAK,EAAEA,KAAK,CAACG,OAAN,CAAc,IAAd,EAAoB,EAApB,CAFO;AAGdC,MAAAA,WAAW,EAAE,+BAHC;AAIdC,MAAAA,UAAU,EAAE;AAJE,KAAhB;AAOA,UAAMC,QAAa,GAAG,MAAMf,GAAG,CAACgB,OAAJ,CAC1Bf,gBAAgB,CAACG,cAAD,EAAiB;AAAEa,MAAAA,KAAK,EAAEN;AAAT,KAAjB,CADU,CAA5B;AAIA,UAAMO,aAAa,GAAG,MAAMrB,UAAU,CAACS,iBAAD,CAAtC;AAEAY,IAAAA,aAAa,SAAb,IAAAA,aAAa,WAAb,YAAAA,aAAa,CACTC,kBADJ,CACuB;AACnBC,MAAAA,SAAS,EAAEL,QAAQ,CAACM,IAAT,CAAcjB;AADN,KADvB,EAIGkB,IAJH,CAIQ,UAAUC,MAAV,EAAuB;AAC3BxB,MAAAA,OAAO,CAACyB,KAAR,CAAcD,MAAM,CAACC,KAAP,CAAazB,OAA3B;AACD,KANH;AAOD,GArBD;;AAuBA,sBACE,QAAC,QAAD;AAAU,IAAA,MAAM,EAAEF,UAAU,CAACS,iBAAD,CAA5B;AAAA,2BACE,QAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,OAAb;AAAqB,MAAA,IAAI,EAAC,SAA1B;AAAoC,MAAA,OAAO,EAAEI,SAA7C;AAAA,+CAEE,QAAC,kBAAD;AAAoB,QAAA,MAAM,MAA1B;AAA2B,QAAA,MAAM,MAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAUD,CAlCD;;KAAMH,a;AAoCN,eAAeA,aAAf","sourcesContent":["import { Elements } from \"@stripe/react-stripe-js\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Button, message } from \"antd\";\nimport { API, graphqlOperation } from \"aws-amplify\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { processPayment } from \"../../../graphql/mutations\";\nimport { StyledCheckoutText } from \"../../Styles/Text.style\";\n\nconst STRIPE_PUBLIC_KEY: string =\n  \"pk_test_51K6Lv8JfUhuzTQLsnTrk8sZTeap3i5f9QUCq8UlN4Rk0LRc77GbxppRAAqW5yl6RimUU1DSEymcAw4ioHnyAoCI000QFZV7fIs\";\n\ninterface paymentButtonProps {\n  id: string;\n  total: string;\n}\n\nconst PaymentButton = ({ id, total }: paymentButtonProps) => {\n  const handlePay = async () => {\n    const payload = {\n      id: uuidv4(),\n      total: total.replace(/,/g, \"\"),\n      success_url: \"http://localhost:3000/success\",\n      cancel_url: \"http://localhost:3000\",\n    };\n\n    const response: any = await API.graphql(\n      graphqlOperation(processPayment, { input: payload })\n    );\n\n    const stripePromise = await loadStripe(STRIPE_PUBLIC_KEY);\n\n    stripePromise\n      ?.redirectToCheckout({\n        sessionId: response.data.processPayment,\n      })\n      .then(function (result: any) {\n        message.error(result.error.message);\n      });\n  };\n\n  return (\n    <Elements stripe={loadStripe(STRIPE_PUBLIC_KEY)}>\n      <Button size=\"large\" type=\"primary\" onClick={handlePay}>\n        Checkout with\n        <StyledCheckoutText strong italic>\n          Stripe\n        </StyledCheckoutText>\n      </Button>\n    </Elements>\n  );\n};\n\nexport default PaymentButton;\n"]},"metadata":{},"sourceType":"module"}