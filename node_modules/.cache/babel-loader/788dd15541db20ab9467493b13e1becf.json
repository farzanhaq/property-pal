{"ast":null,"code":"var _jsxFileName = \"/Users/farzanhaq/Desktop/PropertyPal/src/components/Booking/Identification/Identification.tsx\",\n    _s = $RefreshSig$();\n\nimport { LoadingOutlined, PlusOutlined, RightOutlined } from \"@ant-design/icons\";\nimport { Button, message, Space, Typography } from \"antd\";\nimport { Auth, Storage } from \"aws-amplify\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { BookingStatusContext } from \"../../../utils/BookingState\";\nimport { StyledButtonNavDiv, StyledContentDiv, StyledIdentificationDiv, StyledIdentificationUploadDiv } from \"../../Styles/Div.style\";\nimport { StyledIdentificationUploadImage } from \"../../Styles/Image.style\";\nimport { StyledPrompt } from \"../../Styles/Title.style\";\nimport { StyledIdentificationUploader } from \"../../Styles/Upload.style\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Identification = () => {\n  _s();\n\n  const [loading, setLoading] = useState(false);\n  const [imageUrl, setImageUrl] = useState(\"\");\n  const {\n    currentStep,\n    setCurrentStep\n  } = useContext(BookingStatusContext);\n  useEffect(() => {\n    getImageUrl();\n  }, []);\n\n  const getImageUrl = async () => {\n    const userInfo = await Auth.currentUserInfo();\n\n    if (userInfo.attributes.hasOwnProperty(\"picture\")) {\n      const fileAccessURL = await Storage.get(`identifications/${userInfo.username}`);\n      setImageUrl(fileAccessURL);\n    }\n  };\n\n  const getBase64 = (img, callback) => {\n    const reader = new FileReader();\n    reader.addEventListener(\"load\", () => callback(reader.result));\n    reader.readAsDataURL(img);\n  };\n\n  const beforeUpload = file => {\n    const isJpgOrPng = file.type === \"image/jpeg\" || file.type === \"image/png\";\n\n    if (!isJpgOrPng) {\n      message.error(\"Please upload a JPG/PNG file\");\n    }\n\n    const isLt2M = file.size / 1024 / 1024 < 2;\n\n    if (!isLt2M) {\n      message.error(\"Image must smaller than 2MB\");\n    }\n\n    return isJpgOrPng && isLt2M;\n  };\n\n  const handleChange = info => {\n    if (info.file.status === \"uploading\") {\n      setLoading(true);\n      return;\n    }\n\n    if (info.file.status === \"done\" && info.file.originFileObj) {\n      getBase64(info.file.originFileObj, imageUrl => {\n        setImageUrl(imageUrl);\n        setLoading(false);\n      });\n    }\n  };\n\n  const performUpload = async options => {\n    try {\n      const {\n        onSuccess,\n        file\n      } = options;\n      const user = await Auth.currentAuthenticatedUser();\n      const result = await Storage.put(`identifications/${user.attributes.sub}`, file);\n      await Auth.updateUserAttributes(user, {\n        picture: result.key\n      });\n      setTimeout(() => {\n        onSuccess(\"ok\");\n      }, 0);\n    } catch (err) {\n      message.error(\"There was an error uploading your photo. Please try again.\");\n      console.log(err);\n    }\n  };\n\n  const uploadButton = /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [loading ? /*#__PURE__*/_jsxDEV(LoadingOutlined, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 18\n    }, this) : /*#__PURE__*/_jsxDEV(PlusOutlined, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 40\n    }, this), /*#__PURE__*/_jsxDEV(StyledIdentificationUploadDiv, {\n      children: \"Upload\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(StyledIdentificationDiv, {\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      children: /*#__PURE__*/_jsxDEV(StyledPrompt, {\n        level: 5,\n        children: \"Please upload a photo of your drivers license\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(StyledContentDiv, {\n      children: /*#__PURE__*/_jsxDEV(StyledIdentificationUploader, {\n        listType: \"picture-card\",\n        showUploadList: false,\n        beforeUpload: beforeUpload,\n        onChange: info => handleChange(info),\n        customRequest: options => performUpload(options),\n        children: imageUrl ? /*#__PURE__*/_jsxDEV(StyledIdentificationUploadImage, {\n          src: imageUrl,\n          alt: \"license\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }, this) : uploadButton\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(StyledButtonNavDiv, {\n      children: /*#__PURE__*/_jsxDEV(Space, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          shape: \"circle\",\n          size: \"large\",\n          icon: /*#__PURE__*/_jsxDEV(RightOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 19\n          }, this),\n          onClick: () => {\n            setCurrentStep(currentStep + 1);\n          },\n          disabled: imageUrl !== \"\" ? false : true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Identification, \"TsES43rrau6mflbImpYTTg/en+8=\");\n\n_c = Identification;\nexport default Identification;\n\nvar _c;\n\n$RefreshReg$(_c, \"Identification\");","map":{"version":3,"sources":["/Users/farzanhaq/Desktop/PropertyPal/src/components/Booking/Identification/Identification.tsx"],"names":["LoadingOutlined","PlusOutlined","RightOutlined","Button","message","Space","Typography","Auth","Storage","useContext","useEffect","useState","BookingStatusContext","StyledButtonNavDiv","StyledContentDiv","StyledIdentificationDiv","StyledIdentificationUploadDiv","StyledIdentificationUploadImage","StyledPrompt","StyledIdentificationUploader","Identification","loading","setLoading","imageUrl","setImageUrl","currentStep","setCurrentStep","getImageUrl","userInfo","currentUserInfo","attributes","hasOwnProperty","fileAccessURL","get","username","getBase64","img","callback","reader","FileReader","addEventListener","result","readAsDataURL","beforeUpload","file","isJpgOrPng","type","error","isLt2M","size","handleChange","info","status","originFileObj","performUpload","options","onSuccess","user","currentAuthenticatedUser","put","sub","updateUserAttributes","picture","key","setTimeout","err","console","log","uploadButton"],"mappings":"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","sourcesContent":["import {\n  LoadingOutlined,\n  PlusOutlined,\n  RightOutlined\n} from \"@ant-design/icons\";\nimport { S3ProviderPutOutput } from \"@aws-amplify/storage\";\nimport { Button, message, Space, Typography } from \"antd\";\nimport { UploadChangeParam } from \"antd/lib/upload\";\nimport { UploadFile } from \"antd/lib/upload/interface\";\nimport { Auth, Storage } from \"aws-amplify\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { BookingStatusContext } from \"../../../utils/BookingState\";\nimport {\n  StyledButtonNavDiv,\n  StyledContentDiv,\n  StyledIdentificationDiv,\n  StyledIdentificationUploadDiv\n} from \"../../Styles/Div.style\";\nimport { StyledIdentificationUploadImage } from \"../../Styles/Image.style\";\nimport { StyledPrompt } from \"../../Styles/Title.style\";\nimport { StyledIdentificationUploader } from \"../../Styles/Upload.style\";\n\nconst Identification = () => {\n  const [loading, setLoading] = useState<boolean>(false);\n  const [imageUrl, setImageUrl] = useState<string>(\"\");\n  const { currentStep, setCurrentStep } = useContext(BookingStatusContext);\n\n  useEffect(() => {\n    getImageUrl();\n  }, []);\n\n  const getImageUrl = async () => {\n    const userInfo = await Auth.currentUserInfo();\n\n    if (userInfo.attributes.hasOwnProperty(\"picture\")) {\n      const fileAccessURL: string = await Storage.get(\n        `identifications/${userInfo.username}`\n      );\n\n      setImageUrl(fileAccessURL);\n    }\n  };\n\n\n\n  const getBase64 = (\n    img: Blob,\n    callback: {\n      (imageUrl: any): void;\n      (arg0: string | ArrayBuffer | null): any;\n    }\n  ) => {\n    const reader = new FileReader();\n    reader.addEventListener(\"load\", () => callback(reader.result));\n    reader.readAsDataURL(img);\n  };\n\n  const beforeUpload = (file: { type: string; size: number }) => {\n    const isJpgOrPng = file.type === \"image/jpeg\" || file.type === \"image/png\";\n\n    if (!isJpgOrPng) {\n      message.error(\"Please upload a JPG/PNG file\");\n    }\n\n    const isLt2M = file.size / 1024 / 1024 < 2;\n\n    if (!isLt2M) {\n      message.error(\"Image must smaller than 2MB\");\n    }\n\n    return isJpgOrPng && isLt2M;\n  };\n\n  const handleChange = (info: UploadChangeParam<UploadFile<any>>) => {\n    if (info.file.status === \"uploading\") {\n      setLoading(true);\n      return;\n    }\n\n    if (info.file.status === \"done\" && info.file.originFileObj) {\n      getBase64(info.file.originFileObj, (imageUrl) => {\n        setImageUrl(imageUrl);\n        setLoading(false);\n      });\n    }\n  };\n\n  const performUpload = async (options: any) => {\n    try {\n      const { onSuccess, file } = options;\n\n      const user = await Auth.currentAuthenticatedUser();\n\n      const result: S3ProviderPutOutput = await Storage.put(\n        `identifications/${user.attributes.sub}`,\n        file\n      );\n\n      await Auth.updateUserAttributes(user, {\n        picture: result.key,\n      });\n\n      setTimeout(() => {\n        onSuccess(\"ok\");\n      }, 0);\n    } catch (err) {\n      message.error(\n        \"There was an error uploading your photo. Please try again.\"\n      );\n      console.log(err);\n    }\n  };\n\n  const uploadButton = (\n    <div>\n      {loading ? <LoadingOutlined /> : <PlusOutlined />}\n      <StyledIdentificationUploadDiv>Upload</StyledIdentificationUploadDiv>\n    </div>\n  );\n\n  return (\n    <StyledIdentificationDiv>\n      <Typography>\n        <StyledPrompt level={5}>\n          Please upload a photo of your drivers license\n        </StyledPrompt>\n      </Typography>\n      <StyledContentDiv>\n        <StyledIdentificationUploader\n          listType=\"picture-card\"\n          showUploadList={false}\n          beforeUpload={beforeUpload}\n          onChange={(info) => handleChange(info)}\n          customRequest={(options) => performUpload(options)}\n        >\n          {imageUrl ? (\n            <StyledIdentificationUploadImage src={imageUrl} alt=\"license\" />\n          ) : (\n            uploadButton\n          )}\n        </StyledIdentificationUploader>\n      </StyledContentDiv>\n      <br />\n      <br />\n      <StyledButtonNavDiv>\n        <Space>\n          <Button\n            type=\"primary\"\n            shape=\"circle\"\n            size=\"large\"\n            icon={<RightOutlined />}\n            onClick={() => {\n              setCurrentStep(currentStep + 1);\n            }}\n            disabled={imageUrl !== \"\" ? false : true}\n          />\n        </Space>\n      </StyledButtonNavDiv>\n    </StyledIdentificationDiv>\n  );\n};\n\nexport default Identification;\n"]},"metadata":{},"sourceType":"module"}