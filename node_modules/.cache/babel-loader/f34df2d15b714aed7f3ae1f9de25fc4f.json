{"ast":null,"code":"var _jsxFileName = \"/Users/farzanhaq/Desktop/PropertyPal/src/components/Authentication/Login/Login.tsx\",\n    _s = $RefreshSig$();\n\nimport { Divider, Typography, Form, Input, Checkbox, Alert } from \"antd\";\nimport { UserOutlined, LockOutlined } from \"@ant-design/icons\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { API, Auth } from \"aws-amplify\";\nimport { useContext, useState } from \"react\";\nimport { AuthStatusContext } from \"../../../utils/AuthState\";\nimport { StyledTitle } from \"../../Styles/Title.style\";\nimport { StyledAuthenticationForm } from \"../../Styles/Form.style\";\nimport { StyledLoginFormButton } from \"../../Styles/Button.style\";\nimport { StyledContentDiv, StyledLoginDiv } from \"../../Styles/Div.style\";\nimport { StyledForgotLoginLink } from \"../../Styles/Link.style\";\nimport { listScreenings } from \"../../../graphql/queries\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  Item\n} = Form;\n\nconst Login = () => {\n  _s();\n\n  const [showError, setShowError] = useState(false);\n  const {\n    setLoggedIn\n  } = useContext(AuthStatusContext);\n  const history = useHistory();\n\n  const onLogIn = async values => {\n    try {\n      setShowError(false);\n      await Auth.signIn(values.username, values.password);\n      setLoggedIn(true);\n      const {\n        attributes: {\n          email\n        }\n      } = await Auth.currentAuthenticatedUser();\n      const filter = {\n        user_email: {\n          eq: email\n        }\n      };\n      const screenings = await API.graphql({\n        query: listScreenings,\n        variables: {\n          filter: filter\n        }\n      });\n      screenings.data.listScreenings.items.length === 0 ? history.push(\"/screening\") : history.push(\"/results\");\n    } catch (error) {\n      setShowError(true);\n    }\n  };\n\n  const errorMessage = showError && /*#__PURE__*/_jsxDEV(Alert, {\n    message: \"Your username or password is incorrect. Please try again.\",\n    type: \"error\",\n    showIcon: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(StyledLoginDiv, {\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        children: /*#__PURE__*/_jsxDEV(StyledTitle, {\n          level: 2,\n          children: \"Log In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), showError && /*#__PURE__*/_jsxDEV(Alert, {\n        message: \"Your username or password is incorrect. Please try again.\",\n        type: \"error\",\n        showIcon: true,\n        closable: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(StyledContentDiv, {\n        children: /*#__PURE__*/_jsxDEV(StyledAuthenticationForm, {\n          name: \"normal_login\",\n          initialValues: {\n            remember: true\n          },\n          onFinish: onLogIn,\n          children: [/*#__PURE__*/_jsxDEV(Item, {\n            name: \"username\",\n            rules: [{\n              required: true,\n              message: \"Please enter your username\"\n            }],\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              prefix: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 30\n              }, this),\n              placeholder: \"Username\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Item, {\n            name: \"password\",\n            rules: [{\n              required: true,\n              message: \"Please enter your password\"\n            }],\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              prefix: /*#__PURE__*/_jsxDEV(LockOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 25\n              }, this),\n              type: \"password\",\n              placeholder: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Item, {\n            children: [/*#__PURE__*/_jsxDEV(Item, {\n              name: \"remember\",\n              valuePropName: \"checked\",\n              noStyle: true,\n              children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                children: \"Remember me\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(StyledForgotLoginLink, {\n              to: \"reset\",\n              children: \"Forgot password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Item, {\n            children: [/*#__PURE__*/_jsxDEV(StyledLoginFormButton, {\n              type: \"primary\",\n              htmlType: \"submit\",\n              children: \"Log in\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 15\n            }, this), \"Or \", /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/signup\",\n              children: \"Sign Up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 18\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(Login, \"nuD73X1VBJ364bhaQ6PVmjFFy5A=\", false, function () {\n  return [useHistory];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/farzanhaq/Desktop/PropertyPal/src/components/Authentication/Login/Login.tsx"],"names":["Divider","Typography","Form","Input","Checkbox","Alert","UserOutlined","LockOutlined","Link","useHistory","API","Auth","useContext","useState","AuthStatusContext","StyledTitle","StyledAuthenticationForm","StyledLoginFormButton","StyledContentDiv","StyledLoginDiv","StyledForgotLoginLink","listScreenings","Item","Login","showError","setShowError","setLoggedIn","history","onLogIn","values","signIn","username","password","attributes","email","currentAuthenticatedUser","filter","user_email","eq","screenings","graphql","query","variables","data","items","length","push","error","errorMessage","remember","required","message"],"mappings":"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","sourcesContent":["import { Divider, Typography, Form, Input, Checkbox, Alert } from \"antd\";\nimport { UserOutlined, LockOutlined } from \"@ant-design/icons\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { API, Auth } from \"aws-amplify\";\nimport { useContext, useState } from \"react\";\nimport { AuthStatusContext } from \"../../../utils/AuthState\";\nimport { StyledTitle } from \"../../Styles/Title.style\";\nimport { StyledAuthenticationForm } from \"../../Styles/Form.style\";\nimport { StyledLoginFormButton } from \"../../Styles/Button.style\";\nimport { StyledContentDiv, StyledLoginDiv } from \"../../Styles/Div.style\";\nimport { StyledForgotLoginLink } from \"../../Styles/Link.style\";\nimport { listScreenings } from \"../../../graphql/queries\";\n\nconst { Item } = Form;\n\nconst Login = () => {\n  const [showError, setShowError] = useState(false);\n  const { setLoggedIn } = useContext(AuthStatusContext);\n  const history = useHistory();\n\n  const onLogIn = async (values: any) => {\n    try {\n      setShowError(false);\n\n      await Auth.signIn(values.username, values.password);\n      setLoggedIn(true);\n\n      const {\n        attributes: { email },\n      } = await Auth.currentAuthenticatedUser();\n\n      const filter = {\n        user_email: {\n          eq: email,\n        },\n      };\n\n      const screenings: any = await API.graphql({\n        query: listScreenings,\n        variables: { filter: filter },\n      });\n\n      screenings.data.listScreenings.items.length === 0\n        ? history.push(\"/screening\")\n        : history.push(\"/results\");\n    } catch (error) {\n      setShowError(true);\n    }\n  };\n\n  const errorMessage = showError && (\n    <Alert\n      message=\"Your username or password is incorrect. Please try again.\"\n      type=\"error\"\n      showIcon\n    />\n  );\n\n  return (\n    <>\n      <StyledLoginDiv>\n        <Typography>\n          <StyledTitle level={2}>Log In</StyledTitle>\n        </Typography>\n        <Divider />\n        {showError && (\n          <Alert\n            message=\"Your username or password is incorrect. Please try again.\"\n            type=\"error\"\n            showIcon\n            closable\n          />\n        )}\n\n        <StyledContentDiv>\n          <StyledAuthenticationForm\n            name=\"normal_login\"\n            initialValues={{ remember: true }}\n            onFinish={onLogIn}\n          >\n            <Item\n              name=\"username\"\n              rules={[\n                { required: true, message: \"Please enter your username\" },\n              ]}\n            >\n              <Input prefix={<UserOutlined />} placeholder=\"Username\" />\n            </Item>\n            <Item\n              name=\"password\"\n              rules={[\n                { required: true, message: \"Please enter your password\" },\n              ]}\n            >\n              <Input\n                prefix={<LockOutlined />}\n                type=\"password\"\n                placeholder=\"Password\"\n              />\n            </Item>\n            <Item>\n              <Item name=\"remember\" valuePropName=\"checked\" noStyle>\n                <Checkbox>Remember me</Checkbox>\n              </Item>\n              <StyledForgotLoginLink to=\"reset\">\n                Forgot password\n              </StyledForgotLoginLink>\n            </Item>\n            <Item>\n              <StyledLoginFormButton type=\"primary\" htmlType=\"submit\">\n                Log in\n              </StyledLoginFormButton>\n              Or <Link to=\"/signup\">Sign Up</Link>\n            </Item>\n          </StyledAuthenticationForm>\n        </StyledContentDiv>\n      </StyledLoginDiv>\n    </>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}